{"version":3,"file":"jquery.contextMenu.min.js","sources":["jquery.contextMenu.min.js"],"sourcesContent":["/**\n * jQuery contextMenu v2.9.2 - Plugin for simple contextMenu handling\n *\n * Version: v2.9.2\n *\n * Authors: BjÃ¶rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)\n * Web: http://swisnl.github.io/jQuery-contextMenu/\n *\n * Copyright (c) 2011-2025 SWIS BV and contributors\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n * Date: 2025-11-04T11:31:41.320Z\n */\n\n// jscs:disable\n/* jshint ignore:start */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node / CommonJS\n        factory(require('jquery'));\n    } else {\n        // Browser globals.\n        factory(jQuery);\n    }\n})(function ($) {\n\n    'use strict';\n\n    // helper function to check for rapid interactions after menu display\n    var isInteractionTooFast = function($element) {\n        if (!('ontouchstart' in window\n            || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0)) {\n            return false;\n        }\n        var interactionTime = Date.now();\n        var $liItem = $element.is('input, textarea, select') ? $element.closest('.context-menu-item') : $element;\n        if (!$liItem || !$liItem.length) {\n            return false;\n        }\n        var $parentMenu = $liItem.parent();\n        if (!$parentMenu || !$parentMenu.length) {\n            return false;\n        }\n\n        // only apply the check for items within submenus\n        if ($parentMenu.hasClass('context-menu-root')) {\n            return false;\n        }\n\n        var showTimestamp = $parentMenu.data('_showTimestamp');\n        var timeDifference = showTimestamp ? interactionTime - showTimestamp : Infinity;\n\n        // threshold for fast interaction (e.g., mobile tap)\n        var threshold = 50; // ms\n\n        return timeDifference < threshold;\n    };\n\n    // TODO: -\n    // ARIA stuff: menuitem, menuitemcheckbox und menuitemradio\n    // create <menu> structure if $.support[htmlCommand || htmlMenuitem] and !opt.disableNative\n\n    // determine html5 compatibility\n    $.support.htmlMenuitem = ('HTMLMenuItemElement' in window);\n    $.support.htmlCommand = ('HTMLCommandElement' in window);\n    $.support.eventSelectstart = ('onselectstart' in document.documentElement);\n    /* // should the need arise, test for css user-select\n     $.support.cssUserSelect = (function(){\n     var t = false,\n     e = document.createElement('div');\n\n     $.each('Moz|Webkit|Khtml|O|ms|Icab|'.split('|'), function(i, prefix) {\n     var propCC = prefix + (prefix ? 'U' : 'u') + 'serSelect',\n     prop = (prefix ? ('-' + prefix.toLowerCase() + '-') : '') + 'user-select';\n\n     e.style.cssText = prop + ': text;';\n     if (e.style[propCC] == 'text') {\n     t = true;\n     return false;\n     }\n\n     return true;\n     });\n\n     return t;\n     })();\n     */\n\n\n    if (!$.ui || !$.widget) {\n        // duck punch $.cleanData like jQueryUI does to get that remove event\n        $.cleanData = (function (orig) {\n            return function (elems) {\n                var events, elem, i;\n                for (i = 0; elems[i] != null; i++) {\n                    elem = elems[i];\n                    try {\n                        // Only trigger remove when necessary to save time\n                        events = $._data(elem, 'events');\n                        if (events && events.remove) {\n                            $(elem).triggerHandler('remove');\n                        }\n\n                        // Http://bugs.jquery.com/ticket/8235\n                    } catch (e) {\n                    }\n                }\n                orig(elems);\n            };\n        })($.cleanData);\n    }\n    /* jshint ignore:end */\n    // jscs:enable\n\n    var // currently active contextMenu trigger\n        $currentTrigger = null,\n        // is contextMenu initialized with at least one menu?\n        initialized = false,\n        // window handle\n        $win = $(window),\n        // number of registered menus\n        counter = 0,\n        // mapping selector to namespace\n        namespaces = {},\n        // mapping namespace to options\n        menus = {},\n        // custom command type handlers\n        types = {},\n        // default values\n        defaults = {\n            // selector of contextMenu trigger\n            selector: null,\n            // where to append the menu to\n            appendTo: null,\n            // method to trigger context menu [\"right\", \"left\", \"hover\"]\n            trigger: 'right',\n            // hide menu when mouse leaves trigger / menu elements\n            autoHide: false,\n            // ms to wait before showing a hover-triggered context menu\n            delay: 200,\n            // flag denoting if a second trigger should simply move (true) or rebuild (false) an open menu\n            // as long as the trigger happened on one of the trigger-element's child nodes\n            reposition: true,\n            // Flag denoting if a second trigger should close the menu, as long as\n            // the trigger happened on one of the trigger-element's child nodes.\n            // This overrides the reposition option.\n            hideOnSecondTrigger: false,\n\n            // use a modal layer for closing the menu rather than a captured event on document\n            useModal: true,\n\n            //ability to select submenu\n            selectableSubMenu: false,\n\n            // Default classname configuration to be able avoid conflicts in frameworks\n            classNames: {\n                hover: 'context-menu-hover', // Item hover\n                disabled: 'context-menu-disabled', // Item disabled\n                visible: 'context-menu-visible', // Item visible\n                notSelectable: 'context-menu-not-selectable', // Item not selectable\n\n                icon: 'context-menu-icon',\n                iconEdit: 'context-menu-icon-edit',\n                iconCut: 'context-menu-icon-cut',\n                iconCopy: 'context-menu-icon-copy',\n                iconPaste: 'context-menu-icon-paste',\n                iconDelete: 'context-menu-icon-delete',\n                iconAdd: 'context-menu-icon-add',\n                iconQuit: 'context-menu-icon-quit',\n                iconLoadingClass: 'context-menu-icon-loading'\n            },\n\n            // determine position to show menu at\n            determinePosition: function ($menu) {\n                // position to the lower middle of the trigger element\n                if ($.ui && $.ui.position) {\n                    // .position() is provided as a jQuery UI utility\n                    // (...and it won't work on hidden elements)\n                    $menu.css('display', 'block').position({\n                        my: 'center top',\n                        at: 'center bottom',\n                        of: this,\n                        offset: '0 5',\n                        collision: 'fit'\n                    }).css('display', 'none');\n                } else {\n                    // determine contextMenu position\n                    var offset = this.offset();\n                    offset.top += this.outerHeight();\n                    offset.left += this.outerWidth() / 2 - $menu.outerWidth() / 2;\n                    $menu.css(offset);\n                }\n            },\n            // position menu\n            position: function (opt, x, y) {\n                var offset;\n                // determine contextMenu position\n                if (!x && !y) {\n                    opt.determinePosition.call(this, opt.$menu);\n                    return;\n                } else if (x === 'maintain' && y === 'maintain') {\n                    // x and y must not be changed (after re-show on command click)\n                    offset = opt.$menu.position();\n                } else {\n                    // x and y are given (by mouse event)\n                    var offsetParentOffset = opt.$menu.offsetParent().offset();\n                    offset = {top: y - offsetParentOffset.top, left: x -offsetParentOffset.left};\n                }\n\n                // correct offset if viewport demands it\n                var bottom = $win.scrollTop() + $win.height(),\n                    right = $win.scrollLeft() + $win.width(),\n                    height = opt.$menu.outerHeight(),\n                    width = opt.$menu.outerWidth();\n\n                if (offset.top + height > bottom) {\n                    offset.top -= height;\n                }\n\n                if (offset.top < 0) {\n                    offset.top = 0;\n                }\n\n                if (offset.left + width > right) {\n                    offset.left -= width;\n                }\n\n                if (offset.left < 0) {\n                    offset.left = 0;\n                }\n\n                opt.$menu.css(offset);\n            },\n            // position the sub-menu\n            positionSubmenu: function ($menu) {\n                if (typeof $menu === 'undefined') {\n                    // When user hovers over item (which has sub items) handle.focusItem will call this.\n                    // but the submenu does not exist yet if opt.items is a promise. just return, will\n                    // call positionSubmenu after promise is completed.\n                    return;\n                }\n                if ($.ui && $.ui.position) {\n                    // .position() is provided as a jQuery UI utility\n                    // (...and it won't work on hidden elements)\n                    $menu.css('display', 'block').position({\n                        my: 'left top-5',\n                        at: 'right top',\n                        of: this,\n                        collision: 'flipfit fit'\n                    }).css('display', '');\n                } else {\n                    // determine contextMenu position\n                    var offset = {\n                        top: -9,\n                        left: this.outerWidth() - 5\n                    };\n                    $menu.css(offset);\n                }\n            },\n            // offset to add to zIndex\n            zIndex: 1,\n            // show hide animation settings\n            animation: {\n                duration: 50,\n                show: 'slideDown',\n                hide: 'slideUp'\n            },\n            // events\n            events: {\n                preShow: $.noop,\n                show: $.noop,\n                hide: $.noop,\n                activated: $.noop\n            },\n            // default callback\n            callback: null,\n            // list of contextMenu items\n            items: {}\n        },\n        // mouse position for hover activation\n        hoveract = {\n            timer: null,\n            pageX: null,\n            pageY: null\n        },\n        // determine zIndex\n        zindex = function ($t) {\n            var zin = 0,\n                $tt = $t;\n\n            while (true) {\n                zin = Math.max(zin, parseInt($tt.css('z-index'), 10) || 0);\n                $tt = $tt.parent();\n                if (!$tt || !$tt.length || 'html body'.indexOf($tt.prop('nodeName').toLowerCase()) > -1) {\n                    break;\n                }\n            }\n            return zin;\n        },\n        // event handlers\n        handle = {\n            // abort anything\n            abortevent: function (e) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            },\n            // contextmenu show dispatcher\n            contextmenu: function (e) {\n                var $this = $(this);\n\n                //Show browser context-menu when preShow returns false\n                if (e.data.events.preShow($this,e) === false) {\n                    return;\n                }\n\n                // disable actual context-menu if we are using the right mouse button as the trigger\n                if (e.data.trigger === 'right') {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n\n                // abort native-triggered events unless we're triggering on right click\n                if ((e.data.trigger !== 'right' && e.data.trigger !== 'demand') && e.originalEvent) {\n                    return;\n                }\n\n                // Let the current contextmenu decide if it should show or not based on its own trigger settings\n                if (typeof e.mouseButton !== 'undefined' && e.data) {\n                    if (!(e.data.trigger === 'left' && e.mouseButton === 0) && !(e.data.trigger === 'right' && e.mouseButton === 2)) {\n                        // Mouse click is not valid.\n                        return;\n                    }\n                }\n\n                // abort event if menu is visible for this trigger\n                if ($this.hasClass('context-menu-active')) {\n                    return;\n                }\n\n                if (!$this.hasClass('context-menu-disabled')) {\n                    // theoretically need to fire a show event at <menu>\n                    // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus\n                    // var evt = jQuery.Event(\"show\", { data: data, pageX: e.pageX, pageY: e.pageY, relatedTarget: this });\n                    // e.data.$menu.trigger(evt);\n\n                    $currentTrigger = $this;\n                    if (e.data.build) {\n                        var built = e.data.build($currentTrigger, e);\n                        // abort if build() returned false\n                        if (built === false) {\n                            return;\n                        }\n\n                        // dynamically build menu on invocation\n                        e.data = $.extend(true, {}, defaults, e.data, built || {});\n\n                        // abort if there are no items to display\n                        if (!e.data.items || $.isEmptyObject(e.data.items)) {\n                            // Note: jQuery captures and ignores errors from event handlers\n                            if (window.console) {\n                                (console.error || console.log).call(console, 'No items specified to show in contextMenu');\n                            }\n\n                            throw new Error('No Items specified');\n                        }\n\n                        // backreference for custom command type creation\n                        e.data.$trigger = $currentTrigger;\n\n                        op.create(e.data);\n                    }\n                    op.show.call($this, e.data, e.pageX, e.pageY);\n                }\n            },\n            // contextMenu left-click trigger\n            click: function (e) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                $(this).trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY}));\n            },\n            // contextMenu right-click trigger\n            mousedown: function (e) {\n                // register mouse down\n                var $this = $(this);\n\n                // hide any previous menus\n                if ($currentTrigger && $currentTrigger.length && !$currentTrigger.is($this)) {\n                    $currentTrigger.data('contextMenu').$menu.trigger('contextmenu:hide');\n                }\n\n                // activate on right click\n                if (e.button === 2) {\n                    $currentTrigger = $this.data('contextMenuActive', true);\n                }\n            },\n            // contextMenu right-click trigger\n            mouseup: function (e) {\n                // show menu\n                var $this = $(this);\n                if ($this.data('contextMenuActive') && $currentTrigger && $currentTrigger.length && $currentTrigger.is($this) && !$this.hasClass('context-menu-disabled')) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    $currentTrigger = $this;\n                    $this.trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY}));\n                }\n\n                $this.removeData('contextMenuActive');\n            },\n            // contextMenu hover trigger\n            mouseenter: function (e) {\n                var $this = $(this),\n                    $related = $(e.relatedTarget),\n                    $document = $(document);\n\n                // abort if we're coming from a menu\n                if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                    return;\n                }\n\n                // abort if a menu is shown\n                if ($currentTrigger && $currentTrigger.length) {\n                    return;\n                }\n\n                hoveract.pageX = e.pageX;\n                hoveract.pageY = e.pageY;\n                hoveract.data = e.data;\n                $document.on('mousemove.contextMenuShow', handle.mousemove);\n                hoveract.timer = setTimeout(function () {\n                    hoveract.timer = null;\n                    $document.off('mousemove.contextMenuShow');\n                    $currentTrigger = $this;\n                    $this.trigger($.Event('contextmenu', {\n                        data: hoveract.data,\n                        pageX: hoveract.pageX,\n                        pageY: hoveract.pageY\n                    }));\n                }, e.data.delay);\n            },\n            // contextMenu hover trigger\n            mousemove: function (e) {\n                hoveract.pageX = e.pageX;\n                hoveract.pageY = e.pageY;\n            },\n            // contextMenu hover trigger\n            mouseleave: function (e) {\n                // abort if we're leaving for a menu\n                var $related = $(e.relatedTarget);\n                if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                    return;\n                }\n\n                try {\n                    clearTimeout(hoveract.timer);\n                } catch (e) {\n                }\n\n                hoveract.timer = null;\n            },\n            // click on layer to hide contextMenu\n            layerClick: function (e, opt, onhide) {\n                var $this = $(this),\n                    root = (opt !== undefined) ? opt : $this.data('contextMenuRoot'),\n                    button = e.button,\n                    x = e.pageX,\n                    y = e.pageY,\n                    fakeClick = x === undefined,\n                    target,\n                    offset;\n\n                // If the click is not real, things break: https://github.com/swisnl/jQuery-contextMenu/issues/132\n                if(fakeClick){\n                    if (root !== null && typeof root !== 'undefined' && root.$menu !== null  && typeof root.$menu !== 'undefined') {\n                        root.$menu.trigger('contextmenu:hide');\n                    }\n                    return;\n                }\n\n                // if the click closing is done through windwow event listener rather than a transparent layer\n                if (!root.$layer) {\n                    target = document.elementFromPoint(x - $win.scrollLeft(), y - $win.scrollTop());\n                    if (root.$menu === null || typeof root.$menu === 'undefined' || !root.$menu[0].contains(target)) {\n\n                        root.$menu.trigger('contextmenu:hide');\n                        if (typeof onhide !== 'undefined')\n                            onhide();\n                    }\n                    return;\n                }\n                e.preventDefault();\n\n                setTimeout(function () {\n\n                    var $window;\n                    var triggerAction = ((root.trigger === 'left' && button === 0) || (root.trigger === 'right' && button === 2));\n\n                    // find the element that would've been clicked, wasn't the layer in the way\n                    if (document.elementFromPoint && root.$layer) {\n                        root.$layer.hide();\n                        target = document.elementFromPoint(x - $win.scrollLeft(), y - $win.scrollTop());\n\n                        // also need to try and focus this element if we're in a contenteditable area,\n                        // as the layer will prevent the browser mouse action we want\n                        if (target !== null && target.isContentEditable) {\n                            var range = document.createRange(),\n                                sel = window.getSelection();\n                            range.selectNode(target);\n                            range.collapse(true);\n                            sel.removeAllRanges();\n                            sel.addRange(range);\n                        }\n                        $(target).trigger(e);\n                        root.$layer.show();\n                    }\n\n                    if (root.hideOnSecondTrigger && triggerAction && root.$menu !== null && typeof root.$menu !== 'undefined') {\n                      root.$menu.trigger('contextmenu:hide');\n                      return;\n                    }\n\n                    if (root.reposition && triggerAction) {\n                        if (document.elementFromPoint) {\n                            if (root.$trigger.is(target)) {\n                                root.position.call(root.$trigger, root, x, y);\n                                return;\n                            }\n                        } else {\n                            offset = root.$trigger.offset();\n                            $window = $(window);\n                            // while this looks kinda awful, it's the best way to avoid\n                            // unnecessarily calculating any positions\n                            offset.top += $window.scrollTop();\n                            if (offset.top <= e.pageY) {\n                                offset.left += $window.scrollLeft();\n                                if (offset.left <= e.pageX) {\n                                    offset.bottom = offset.top + root.$trigger.outerHeight();\n                                    if (offset.bottom >= e.pageY) {\n                                        offset.right = offset.left + root.$trigger.outerWidth();\n                                        if (offset.right >= e.pageX) {\n                                            // reposition\n                                            root.position.call(root.$trigger, root, x, y);\n                                            return;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    if (target && triggerAction) {\n                        root.$trigger.one('contextmenu:hidden', function () {\n                            $(target).contextMenu({x: x, y: y, button: button});\n                        });\n                    }\n\n                    if (root !== null && typeof root !== 'undefined' && root.$menu !== null  && typeof root.$menu !== 'undefined') {\n                        root.$menu.trigger('contextmenu:hide');\n                    }\n                }, 50);\n            },\n            // key handled :hover\n            keyStop: function (e, opt) {\n                if (!opt.isInput) {\n                    e.preventDefault();\n                }\n\n                e.stopPropagation();\n            },\n            key: function (e) {\n\n                var opt = {};\n\n                // Only get the data from $currentTrigger if it exists\n                if ($currentTrigger) {\n                    opt = $currentTrigger.data('contextMenu') || {};\n                }\n                // If the trigger happen on a element that are above the contextmenu do this\n                if (typeof opt.zIndex === 'undefined') {\n                    opt.zIndex = 0;\n                }\n                var targetZIndex = 0;\n                var getZIndexOfTriggerTarget = function (target) {\n                    if (target.style.zIndex !== '') {\n                        targetZIndex = target.style.zIndex;\n                    } else {\n                        if (target.offsetParent !== null && typeof target.offsetParent !== 'undefined') {\n                            getZIndexOfTriggerTarget(target.offsetParent);\n                        }\n                        else if (target.parentElement !== null && typeof target.parentElement !== 'undefined') {\n                            getZIndexOfTriggerTarget(target.parentElement);\n                        }\n                    }\n                };\n                getZIndexOfTriggerTarget(e.target);\n                // If targetZIndex is heigher then opt.zIndex dont progress any futher.\n                // This is used to make sure that if you are using a dialog with a input / textarea / contenteditable div\n                // and its above the contextmenu it wont steal keys events\n                if (opt.$menu && parseInt(targetZIndex,10) > parseInt(opt.$menu.css(\"zIndex\"),10)) {\n                    return;\n                }\n                switch (e.keyCode) {\n                    case 9:\n                    case 38: // up\n                        handle.keyStop(e, opt);\n                        // if keyCode is [38 (up)] or [9 (tab) with shift]\n                        if (opt.isInput) {\n                            if (e.keyCode === 9 && e.shiftKey) {\n                                e.preventDefault();\n                                if (opt.$selected) {\n                                    opt.$selected.find('input, textarea, select').blur();\n                                }\n                                if (opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                                    opt.$menu.trigger('prevcommand');\n                                }\n                                return;\n                            } else if (e.keyCode === 38 && opt.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\n                                // checkboxes don't capture this key\n                                e.preventDefault();\n                                return;\n                            }\n                        } else if (e.keyCode !== 9 || e.shiftKey) {\n                            if (opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                                opt.$menu.trigger('prevcommand');\n                            }\n                            return;\n                        }\n                        break;\n                    // omitting break;\n                    // case 9: // tab - reached through omitted break;\n                    case 40: // down\n                        handle.keyStop(e, opt);\n                        if (opt.isInput) {\n                            if (e.keyCode === 9) {\n                                e.preventDefault();\n                                if (opt.$selected) {\n                                    opt.$selected.find('input, textarea, select').blur();\n                                }\n                                if (opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                                    opt.$menu.trigger('nextcommand');\n                                }\n                                return;\n                            } else if (e.keyCode === 40 && opt.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\n                                // checkboxes don't capture this key\n                                e.preventDefault();\n                                return;\n                            }\n                        } else {\n                            if (opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                                opt.$menu.trigger('nextcommand');\n                            }\n                            return;\n                        }\n                        break;\n\n                    case 37: // left\n                        handle.keyStop(e, opt);\n                        if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                            break;\n                        }\n\n                        if (!opt.$selected.parent().hasClass('context-menu-root')) {\n                            var $parent = opt.$selected.parent().parent();\n                            opt.$selected.trigger('contextmenu:blur');\n                            opt.$selected = $parent;\n                            return;\n                        }\n                        break;\n\n                    case 39: // right\n                        handle.keyStop(e, opt);\n                        if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                            break;\n                        }\n\n                        var itemdata = opt.$selected.data('contextMenu') || {};\n                        if (itemdata.$menu && opt.$selected.hasClass('context-menu-submenu')) {\n                            opt.$selected = null;\n                            itemdata.$selected = null;\n                            itemdata.$menu.trigger('nextcommand');\n                            return;\n                        }\n                        break;\n\n                    case 35: // end\n                    case 36: // home\n                        if (opt.$selected && opt.$selected.find('input, textarea, select').length) {\n                            return;\n                        } else {\n                            (opt.$selected && opt.$selected.parent() || opt.$menu)\n                                .children(':not(.' + opt.classNames.disabled + ', .' + opt.classNames.notSelectable + ')')[e.keyCode === 36 ? 'first' : 'last']()\n                                .trigger('contextmenu:focus');\n                            e.preventDefault();\n                            return;\n                        }\n                        break;\n\n                    case 13: // enter\n                        handle.keyStop(e, opt);\n                        if (opt.isInput) {\n                            if (opt.$selected && !opt.$selected.is('textarea, select')) {\n                                e.preventDefault();\n                                return;\n                            }\n                            break;\n                        }\n                        if (typeof opt.$selected !== 'undefined' && opt.$selected !== null) {\n                            opt.$selected.trigger('mouseup');\n                        }\n                        return;\n\n                    case 32: // space\n                    case 33: // page up\n                    case 34: // page down\n                        // prevent browser from scrolling down while menu is visible\n                        handle.keyStop(e, opt);\n                        return;\n\n                    case 27: // esc\n                        handle.keyStop(e, opt);\n                        if (opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                            opt.$menu.trigger('contextmenu:hide');\n                        }\n                        return;\n\n                    default: // 0-9, a-z\n                        var k = (String.fromCharCode(e.keyCode)).toUpperCase();\n                        if (opt.accesskeys && opt.accesskeys[k]) {\n                            // according to the specs accesskeys must be invoked immediately\n                            opt.accesskeys[k].$node.trigger(opt.accesskeys[k].$menu ? 'contextmenu:focus' : 'mouseup');\n                            return;\n                        }\n                        break;\n                }\n                // pass event to selected item,\n                // stop propagation to avoid endless recursion\n                e.stopPropagation();\n                if (typeof opt.$selected !== 'undefined' && opt.$selected !== null) {\n                    opt.$selected.trigger(e);\n                }\n            },\n            // select previous possible command in menu\n            prevItem: function (e) {\n                e.stopPropagation();\n                var opt = $(this).data('contextMenu') || {};\n                var root = $(this).data('contextMenuRoot') || {};\n\n                // obtain currently selected menu\n                if (opt.$selected) {\n                    var $s = opt.$selected;\n                    opt = opt.$selected.parent().data('contextMenu') || {};\n                    opt.$selected = $s;\n                }\n\n                var $children = opt.$menu.children(),\n                    $prev = !opt.$selected || !opt.$selected.prev().length ? $children.last() : opt.$selected.prev(),\n                    $round = $prev;\n\n                // skip disabled or hidden elements\n                while ($prev.hasClass(root.classNames.disabled) || $prev.hasClass(root.classNames.notSelectable) || $prev.is(':hidden')) {\n                    if ($prev.prev().length) {\n                        $prev = $prev.prev();\n                    } else {\n                        $prev = $children.last();\n                    }\n                    if ($prev.is($round)) {\n                        // break endless loop\n                        return;\n                    }\n                }\n\n                // leave current\n                if (opt.$selected) {\n                    handle.itemMouseleave.call(opt.$selected.get(0), e);\n                }\n\n                // activate next\n                handle.itemMouseenter.call($prev.get(0), e);\n\n                // focus input\n                var $input = $prev.find('input, textarea, select');\n                if ($input.length) {\n                    $input.focus();\n                }\n            },\n            // select next possible command in menu\n            nextItem: function (e) {\n                e.stopPropagation();\n                var opt = $(this).data('contextMenu') || {};\n                var root = $(this).data('contextMenuRoot') || {};\n\n                // obtain currently selected menu\n                if (opt.$selected) {\n                    var $s = opt.$selected;\n                    opt = opt.$selected.parent().data('contextMenu') || {};\n                    opt.$selected = $s;\n                }\n\n                var $children = opt.$menu.children(),\n                    $next = !opt.$selected || !opt.$selected.next().length ? $children.first() : opt.$selected.next(),\n                    $round = $next;\n\n                // skip disabled\n                while ($next.hasClass(root.classNames.disabled) || $next.hasClass(root.classNames.notSelectable) || $next.is(':hidden')) {\n                    if ($next.next().length) {\n                        $next = $next.next();\n                    } else {\n                        $next = $children.first();\n                    }\n                    if ($next.is($round)) {\n                        // break endless loop\n                        return;\n                    }\n                }\n\n                // leave current\n                if (opt.$selected) {\n                    handle.itemMouseleave.call(opt.$selected.get(0), e);\n                }\n\n                // activate next\n                handle.itemMouseenter.call($next.get(0), e);\n\n                // focus input\n                var $input = $next.find('input, textarea, select');\n                if ($input.length) {\n                    $input.focus();\n                }\n            },\n            // flag that we're inside an input so the key handler can act accordingly\n            focusInput: function () {\n                var $this = $(this).closest('.context-menu-item'),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                root.$selected = opt.$selected = $this;\n                root.isInput = opt.isInput = true;\n            },\n            // flag that we're inside an input so the key handler can act accordingly\n            blurInput: function () {\n                var $this = $(this).closest('.context-menu-item'),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                root.isInput = opt.isInput = false;\n            },\n            // :hover on menu\n            menuMouseenter: function () {\n                var root = $(this).data().contextMenuRoot;\n                root.hovering = true;\n            },\n            // :hover on menu\n            menuMouseleave: function (e) {\n                var root = $(this).data().contextMenuRoot;\n                if (root.$layer && root.$layer.is(e.relatedTarget)) {\n                    root.hovering = false;\n                }\n            },\n            // :hover done manually so key handling is possible\n            itemMouseenter: function (e) {\n                var $this = $(this),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                // prevent fast hover on mobile tap-through\n                if (isInteractionTooFast($this)) {\n                    return;\n                }\n\n                root.hovering = true;\n\n                // abort if we're re-entering\n                if (e && root.$layer && root.$layer.is(e.relatedTarget)) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n\n                // make sure only one item is selected\n                (opt.$menu ? opt : root).$menu\n                    .children('.' + root.classNames.hover).trigger('contextmenu:blur')\n                    .children('.hover').trigger('contextmenu:blur');\n\n                if ($this.hasClass(root.classNames.disabled) || $this.hasClass(root.classNames.notSelectable)) {\n                    opt.$selected = null;\n                    return;\n                }\n\n\n                $this.trigger('contextmenu:focus');\n            },\n            // :hover done manually so key handling is possible\n            itemMouseleave: function (e) {\n                var $this = $(this),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                if (root !== opt && root.$layer && root.$layer.is(e.relatedTarget)) {\n                    if (typeof root.$selected !== 'undefined' && root.$selected !== null) {\n                        root.$selected.trigger('contextmenu:blur');\n                    }\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    root.$selected = opt.$selected = opt.$node;\n                    return;\n                }\n\n                if(opt && opt.$menu && opt.$menu.hasClass('context-menu-visible')){\n                    return;\n                }\n\n                $this.trigger('contextmenu:blur');\n            },\n            // contextMenu item click\n            itemClick: function (e) {\n                var $this = $(this),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot,\n                    key = data.contextMenuKey,\n                    callback;\n\n                // prevent fast click-through on mobile taps\n                if (isInteractionTooFast($this)) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                // abort if the key is unknown or disabled or is a menu\n                // explicitly handle non-selectable submenu clicks first to stop propagation\n                if ($this.is('.context-menu-submenu') && root.selectableSubMenu === false) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation(); // Stop event here for non-selectable submenus\n                    return;\n                }\n\n                // original check for other non-clickable/disabled items\n                if (!opt.items[key] || $this.is('.' + root.classNames.disabled + ', .context-menu-separator, .' + root.classNames.notSelectable)) {\n                    return;\n                }\n\n                // if it wasn't a non-selectable submenu or other disabled item, prevent default and stop propagation before callback\n                e.preventDefault();\n                e.stopImmediatePropagation();\n\n                if ($.isFunction(opt.callbacks[key]) && Object.prototype.hasOwnProperty.call(opt.callbacks, key)) {\n                    // item-specific callback\n                    callback = opt.callbacks[key];\n                } else if ($.isFunction(root.callback)) {\n                    // default callback\n                    callback = root.callback;\n                } else {\n                    // no callback, no action\n                    return;\n                }\n\n                // hide menu if callback doesn't stop that\n                if (callback.call(root.$trigger, key, root, e) !== false) {\n                    root.$menu.trigger('contextmenu:hide');\n                } else if (root.$menu.parent().length) {\n                    op.update.call(root.$trigger, root);\n                }\n            },\n            // ignore click events on input elements\n            inputClick: function (e) {\n                e.stopImmediatePropagation();\n            },\n            // hide <menu>\n            hideMenu: function (e, data) {\n                var root = $(this).data('contextMenuRoot');\n                op.hide.call(root.$trigger, root, data && data.force);\n            },\n            // focus <command>\n            focusItem: function (e) {\n                e.stopPropagation();\n                var $this = $(this),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                if ($this.hasClass(root.classNames.disabled) || $this.hasClass(root.classNames.notSelectable)) {\n                    return;\n                }\n\n                $this\n                    .addClass([root.classNames.hover, root.classNames.visible].join(' '))\n                    // select other items and included items\n                    .parent().find('.context-menu-item').not($this)\n                    .removeClass(root.classNames.visible)\n                    .filter('.' + root.classNames.hover)\n                    .trigger('contextmenu:blur');\n\n                // remember selected\n                opt.$selected = root.$selected = $this;\n\n\n                if(opt && opt.$node && opt.$node.hasClass('context-menu-submenu')){\n                    opt.$node.addClass(root.classNames.hover);\n                }\n\n                // position sub-menu - do after show so dumb $.ui.position can keep up\n                if (opt.$node) {\n                    root.positionSubmenu.call(opt.$node, opt.$menu);\n                    if (opt.$menu) {\n                        var focusShowTimestamp = Date.now();\n                         opt.$menu.data('_showTimestamp', focusShowTimestamp);\n                    }\n                }\n            },\n            // blur <command>\n            blurItem: function (e) {\n                e.stopPropagation();\n                var $this = $(this),\n                    data = $this.data(),\n                    opt = data.contextMenu,\n                    root = data.contextMenuRoot;\n\n                if (opt.autoHide) { // for tablets and touch screens this needs to remain\n                    $this.removeClass(root.classNames.visible);\n                }\n                $this.removeClass(root.classNames.hover);\n                opt.$selected = null;\n            }\n        },\n        // operations\n        op = {\n            show: function (opt, x, y) {\n                var $trigger = $(this),\n                    css = {};\n\n                // hide any open menus\n                if ($('#context-menu-layer').length > 0)\n                    $('#context-menu-layer').trigger('mousedown');\n                else\n                    $(document).trigger('contextmenu:hide');\n\n                // backreference for callbacks\n                opt.$trigger = $trigger;\n\n                // show event\n                if (opt.events.show.call($trigger, opt) === false) {\n                    $currentTrigger = null;\n                    return;\n                }\n\n                // create or update context menu\n                var hasVisibleItems = op.update.call($trigger, opt);\n                if (hasVisibleItems === false) {\n                    $currentTrigger = null;\n                    return;\n                }\n\n                // position menu\n                opt.position.call($trigger, opt, x, y);\n\n                // make sure we're in front\n                if (opt.zIndex) {\n                    var additionalZValue = opt.zIndex;\n                    // If opt.zIndex is a function, call the function to get the right zIndex.\n                    if (typeof opt.zIndex === 'function') {\n                        additionalZValue = opt.zIndex.call($trigger, opt);\n                    }\n                    css.zIndex = zindex($trigger) + additionalZValue;\n                }\n\n                // add layer\n                op.layer.call(opt.$menu, opt, css.zIndex);\n\n                // adjust sub-menu zIndexes\n                opt.$menu.find('ul').css('zIndex', css.zIndex + 1);\n\n                // position and show context menu\n                opt.$menu.css(css)[opt.animation.show](opt.animation.duration, function () {\n                    $trigger.trigger('contextmenu:visible');\n\n                    var rootShowTimestamp = Date.now();\n                    opt.$menu.data('_showTimestamp', rootShowTimestamp);\n\n                    op.activated(opt);\n                    opt.events.activated(opt);\n                });\n                // make options available and set state\n                $trigger\n                    .data('contextMenu', opt)\n                    .addClass('context-menu-active');\n\n                // register key handler\n                $(document).off('keydown.contextMenu').on('keydown.contextMenu', handle.key);\n                // register autoHide handler\n                if (opt.autoHide) {\n                    // mouse position handler\n                    $(document).on('mousemove.contextMenuAutoHide', function (e) {\n                        // need to capture the offset on mousemove,\n                        // since the page might've been scrolled since activation\n                        var pos = $trigger.offset();\n                        pos.right = pos.left + $trigger.outerWidth();\n                        pos.bottom = pos.top + $trigger.outerHeight();\n\n                        if (opt.$layer && !opt.hovering && (!(e.pageX >= pos.left && e.pageX <= pos.right) || !(e.pageY >= pos.top && e.pageY <= pos.bottom))) {\n                            /* Additional hover check after short time, you might just miss the edge of the menu */\n                            setTimeout(function () {\n                                if (!opt.hovering && opt.$menu !== null && typeof opt.$menu !== 'undefined') {\n                                    opt.$menu.trigger('contextmenu:hide');\n                                }\n                            }, 50);\n                        }\n                    });\n                }\n            },\n            hide: function (opt, force) {\n                var $trigger = $(this);\n                if (!opt) {\n                    opt = $trigger.data('contextMenu') || {};\n                }\n\n                // hide event\n                if (!force && opt.events && opt.events.hide.call($trigger, opt) === false) {\n                    return;\n                }\n\n                // remove options and revert state\n                $trigger\n                    .removeData('contextMenu')\n                    .removeClass('context-menu-active');\n\n                if (opt.$layer) {\n                    // keep layer for a bit so the contextmenu event can be aborted properly by opera\n                    setTimeout((function ($layer) {\n                        return function () {\n                            $layer.remove();\n                        };\n                    })(opt.$layer), 10);\n\n                    try {\n                        delete opt.$layer;\n                    } catch (e) {\n                        opt.$layer = null;\n                    }\n                }\n\n                // remove handle\n                $currentTrigger = null;\n                // remove selected\n                opt.$menu.find('.' + opt.classNames.hover).trigger('contextmenu:blur');\n                opt.$selected = null;\n                // collapse all submenus\n                opt.$menu.find('.' + opt.classNames.visible).removeClass(opt.classNames.visible);\n                // unregister key and mouse handlers\n                // $(document).off('.contextMenuAutoHide keydown.contextMenu'); // http://bugs.jquery.com/ticket/10705\n                $(document).off('.contextMenuAutoHide').off('keydown.contextMenu');\n                // hide menu\n                if (opt.$menu) {\n                    opt.$menu[opt.animation.hide](opt.animation.duration, function () {\n                        // tear down dynamically built menu after animation is completed.\n                        if (opt.build) {\n                            opt.$menu.remove();\n                            $.each(opt, function (key) {\n                                switch (key) {\n                                    case 'ns':\n                                    case 'selector':\n                                    case 'build':\n                                    case 'trigger':\n                                        return true;\n\n                                    default:\n                                        opt[key] = undefined;\n                                        try {\n                                            delete opt[key];\n                                        } catch (e) {\n                                        }\n                                        return true;\n                                }\n                            });\n                        }\n\n                        setTimeout(function () {\n                            $trigger.trigger('contextmenu:hidden');\n                        }, 10);\n                    });\n                }\n            },\n            create: function (opt, root) {\n                if (typeof root === 'undefined') {\n                    root = opt;\n                }\n\n                // define handler for fast input clicks\n                var handleFastInputClick = function(e) {\n                    var $inputClicked = $(this);\n                    if (isInteractionTooFast($inputClicked)) {\n                        e.preventDefault();\n                        e.stopImmediatePropagation();\n                        return false;\n                    }\n                };\n\n                // create contextMenu\n                opt.$menu = $('<ul class=\"context-menu-list\"></ul>').addClass(opt.className || '').data({\n                    'contextMenu': opt,\n                    'contextMenuRoot': root\n                });\n                if(opt.dataAttr){\n                    $.each(opt.dataAttr, function (key, item) {\n                        opt.$menu.attr('data-' + opt.key, item);\n                    });\n                }\n\n                $.each(['callbacks', 'commands', 'inputs'], function (i, k) {\n                    opt[k] = {};\n                    if (!root[k]) {\n                        root[k] = {};\n                    }\n                });\n\n                if (!root.accesskeys) {\n                    root.accesskeys = {};\n                }\n\n                function createNameNode(item) {\n                    var $name = $('<span></span>');\n                    if (item._accesskey) {\n                        if (item._beforeAccesskey) {\n                            $name.append(document.createTextNode(item._beforeAccesskey));\n                        }\n                        $('<span></span>')\n                            .addClass('context-menu-accesskey')\n                            .text(item._accesskey)\n                            .appendTo($name);\n                        if (item._afterAccesskey) {\n                            $name.append(document.createTextNode(item._afterAccesskey));\n                        }\n                    } else {\n                        if (item.isHtmlName) {\n                            // restrict use with access keys\n                            if (typeof item.accesskey !== 'undefined') {\n                                throw new Error('accesskeys are not compatible with HTML names and cannot be used together in the same item');\n                            }\n                            $name.html(item.name);\n                        } else {\n                            $name.text(item.name);\n                        }\n                    }\n                    return $name;\n                }\n\n                // create contextMenu items\n                $.each(opt.items, function (key, item) {\n                    var $t = $('<li class=\"context-menu-item\"></li>').addClass(item.className || ''),\n                        $label = null,\n                        $input = null;\n\n                    // iOS needs to see a click-event bound to an element to actually\n                    // have the TouchEvents infrastructure trigger the click event\n                    $t.on('click', $.noop);\n\n                    // Make old school string seperator a real item so checks wont be\n                    // akward later.\n                    // And normalize 'cm_separator' into 'cm_seperator'.\n                    if (typeof item === 'string' || item.type === 'cm_separator') {\n                        item = {type: 'cm_seperator'};\n                    }\n\n                    item.$node = $t.data({\n                        'contextMenu': opt,\n                        'contextMenuRoot': root,\n                        'contextMenuKey': key\n                    });\n\n                    // register accesskey\n                    // NOTE: the accesskey attribute should be applicable to any element, but Safari5 and Chrome13 still can't do that\n                    if (typeof item.accesskey !== 'undefined') {\n                        var aks = splitAccesskey(item.accesskey);\n                        for (var i = 0, ak; ak = aks[i]; i++) {\n                            if (!root.accesskeys[ak]) {\n                                root.accesskeys[ak] = item;\n                                var matched = item.name.match(new RegExp('^(.*?)(' + ak + ')(.*)$', 'i'));\n                                if (matched) {\n                                    item._beforeAccesskey = matched[1];\n                                    item._accesskey = matched[2];\n                                    item._afterAccesskey = matched[3];\n                                }\n                                break;\n                            }\n                        }\n                    }\n\n                    if (item.type && types[item.type]) {\n                        // run custom type handler\n                        types[item.type].call($t, item, opt, root);\n                        // register commands\n                        $.each([opt, root], function (i, k) {\n                            k.commands[key] = item;\n                            // Overwrite only if undefined or the item is appended to the root. This so it\n                            // doesn't overwrite callbacks of root elements if the name is the same.\n                            if ($.isFunction(item.callback) && (typeof k.callbacks[key] === 'undefined' || typeof opt.type === 'undefined')) {\n                                k.callbacks[key] = item.callback;\n                            }\n                        });\n                    } else {\n                        // add label for input\n                        if (item.type === 'cm_seperator') {\n                            $t.addClass('context-menu-separator ' + root.classNames.notSelectable);\n                        } else if (item.type === 'html') {\n                            $t.addClass('context-menu-html ' + root.classNames.notSelectable);\n                        } else if (item.type !== 'sub' && item.type) {\n                            $label = $('<label></label>').appendTo($t);\n                            createNameNode(item).appendTo($label);\n\n                            $t.addClass('context-menu-input');\n                            opt.hasTypes = true;\n                            $.each([opt, root], function (i, k) {\n                                k.commands[key] = item;\n                                k.inputs[key] = item;\n                            });\n                        } else if (item.items) {\n                            item.type = 'sub';\n                        }\n\n                        switch (item.type) {\n                            case 'cm_seperator':\n                                break;\n\n                            case 'text':\n                                $input = $('<input type=\"text\" value=\"1\" name=\"\" />')\n                                    .attr('name', 'context-menu-input-' + key)\n                                    .val(item.value || '')\n                                    .appendTo($label);\n                                break;\n\n                            case 'textarea':\n                                $input = $('<textarea name=\"\"></textarea>')\n                                    .attr('name', 'context-menu-input-' + key)\n                                    .val(item.value || '')\n                                    .appendTo($label);\n\n                                if (item.height) {\n                                    $input.height(item.height);\n                                }\n                                break;\n\n                            case 'checkbox':\n                                $input = $('<input type=\"checkbox\" value=\"1\" name=\"\" />')\n                                    .attr('name', 'context-menu-input-' + key)\n                                    .val(item.value || '')\n                                    .prop('checked', !!item.selected)\n                                    .prependTo($label);\n                                // prevent checkbox default action on fast click-through\n                                $input.on('click', handleFastInputClick);\n                                break;\n\n                            case 'radio':\n                                $input = $('<input type=\"radio\" value=\"1\" name=\"\" />')\n                                    .attr('name', 'context-menu-input-' + item.radio)\n                                    .val(item.value || '')\n                                    .prop('checked', !!item.selected)\n                                    .prependTo($label);\n                                // prevent radio default action on fast click-through\n                                $input.on('click', handleFastInputClick);\n                                break;\n\n                            case 'select':\n                                $input = $('<select name=\"\"></select>')\n                                    .attr('name', 'context-menu-input-' + key)\n                                    .appendTo($label);\n                                if (item.options) {\n                                    $.each(item.options, function (value, text) {\n                                        $('<option></option>').val(value).text(text).appendTo($input);\n                                    });\n                                    $input.val(item.selected);\n                                }\n                                break;\n\n                            case 'sub':\n                                createNameNode(item).appendTo($t);\n                                item.appendTo = item.$node;\n                                $t.data('contextMenu', item).addClass('context-menu-submenu');\n                                item.callback = null;\n\n                                // If item contains items, and this is a promise, we should create it later\n                                // check if subitems is of type promise. If it is a promise we need to create\n                                // it later, after promise has been resolved.\n                                if ('function' === typeof item.items.then) {\n                                    // probably a promise, process it, when completed it will create the sub menu's.\n                                    op.processPromises(item, root, item.items);\n                                } else {\n                                    // normal submenu.\n                                    op.create(item, root);\n                                }\n                                break;\n\n                            case 'html':\n                                $(item.html).appendTo($t);\n                                break;\n\n                            default:\n                                $.each([opt, root], function (i, k) {\n                                    k.commands[key] = item;\n                                    // Overwrite only if undefined or the item is appended to the root. This so it\n                                    // doesn't overwrite callbacks of root elements if the name is the same.\n                                    if ($.isFunction(item.callback) && (typeof k.callbacks[key] === 'undefined' || typeof opt.type === 'undefined')) {\n                                        k.callbacks[key] = item.callback;\n                                    }\n                                });\n                                createNameNode(item).appendTo($t);\n                                break;\n                        }\n\n                        // disable key listener in <input>\n                        if (item.type && item.type !== 'sub' && item.type !== 'html' && item.type !== 'cm_seperator') {\n                            $input\n                                .on('focus', handle.focusInput)\n                                .on('blur', handle.blurInput);\n\n                            if (item.events) {\n                                $input.on(item.events, opt);\n                            }\n                        }\n\n                        // add icons\n                        if (item.icon) {\n                            if ($.isFunction(item.icon)) {\n                                item._icon = item.icon.call(this, this, $t, key, item);\n                            } else {\n                                if (typeof(item.icon) === 'string' && (\n                                    item.icon.substring(0, 4) === 'fab '\n                                    || item.icon.substring(0, 4) === 'fas '\n                                    || item.icon.substring(0, 4) === 'fad '\n                                    || item.icon.substring(0, 4) === 'far '\n                                    || item.icon.substring(0, 4) === 'fal ')\n                                ) {\n                                    // to enable font awesome\n                                    $t.addClass(root.classNames.icon + ' ' + root.classNames.icon + '--fa5');\n                                    item._icon = $('<i class=\"' + item.icon + '\"></i>');\n                                } else if (typeof(item.icon) === 'string' && item.icon.substring(0, 3) === 'fa-') {\n                                    item._icon = root.classNames.icon + ' ' + root.classNames.icon + '--fa fa ' + item.icon;\n                                } else {\n                                    item._icon = root.classNames.icon + ' ' + root.classNames.icon + '-' + item.icon;\n                                }\n                            }\n\n                            if(typeof(item._icon) === \"string\"){\n                                $t.addClass(item._icon);\n                            } else {\n                                $t.prepend(item._icon);\n                            }\n                        }\n                    }\n\n                    // cache contained elements\n                    item.$input = $input;\n                    item.$label = $label;\n\n                    // attach item to menu\n                    $t.appendTo(opt.$menu);\n\n                    // Disable text selection\n                    if (!opt.hasTypes && $.support.eventSelectstart) {\n                        // browsers support user-select: none,\n                        // IE has a special event for text-selection\n                        // browsers supporting neither will not be preventing text-selection\n                        $t.on('selectstart.disableTextSelect', handle.abortevent);\n                    }\n                });\n                // attach contextMenu to <body> (to bypass any possible overflow:hidden issues on parents of the trigger element)\n                if (!opt.$node) {\n                    opt.$menu.css('display', 'none').addClass('context-menu-root');\n                }\n                opt.$menu.appendTo(opt.appendTo || document.body);\n            },\n            resize: function ($menu, nested) {\n                var domMenu;\n                // determine widths of submenus, as CSS won't grow them automatically\n                // position:absolute within position:absolute; min-width:100; max-width:200; results in width: 100;\n                // kinda sucks hard...\n\n                // determine width of absolutely positioned element\n                $menu.css({position: 'absolute', display: 'block'});\n                // don't apply yet, because that would break nested elements' widths\n                $menu.data('width',\n                    (domMenu = $menu.get(0)).getBoundingClientRect ?\n                        Math.ceil(domMenu.getBoundingClientRect().width) :\n                        $menu.outerWidth() + 1); // outerWidth() returns rounded pixels\n                // reset styles so they allow nested elements to grow/shrink naturally\n                $menu.css({\n                    position: 'static',\n                    minWidth: '0px',\n                    maxWidth: '100000px'\n                });\n                // identify width of nested menus\n                $menu.find('> li > ul').each(function () {\n                    op.resize($(this), true);\n                });\n                // reset and apply changes in the end because nested\n                // elements' widths wouldn't be calculatable otherwise\n                if (!nested) {\n                    $menu.find('ul').addBack().css({\n                        position: '',\n                        display: '',\n                        minWidth: '',\n                        maxWidth: ''\n                    }).outerWidth(function () {\n                        return $(this).data('width');\n                    });\n                }\n            },\n            update: function (opt, root) {\n                var $trigger = this;\n                if (typeof root === 'undefined') {\n                    root = opt;\n                    op.resize(opt.$menu);\n                }\n\n                var hasVisibleItems = false;\n\n                // re-check disabled for each item\n                opt.$menu.children().each(function () {\n                    var $item = $(this),\n                        key = $item.data('contextMenuKey'),\n                        item = opt.items[key],\n                        disabled = ($.isFunction(item.disabled) && item.disabled.call($trigger, key, root)) || item.disabled === true,\n                        visible;\n                    if ($.isFunction(item.visible)) {\n                        visible = item.visible.call($trigger, key, root);\n                    } else if (typeof item.visible !== 'undefined') {\n                        visible = item.visible === true;\n                    } else {\n                        visible = true;\n                    }\n\n                    if (visible) {\n                        hasVisibleItems = true;\n                    }\n\n                    $item[visible ? 'show' : 'hide']();\n\n                    // dis- / enable item\n                    $item[disabled ? 'addClass' : 'removeClass'](root.classNames.disabled);\n\n                    if ($.isFunction(item.icon)) {\n                        $item.removeClass(item._icon);\n                        var iconResult = item.icon.call(this, $trigger, $item, key, item);\n                        if(typeof(iconResult) === \"string\"){\n                            $item.addClass(iconResult);\n                        } else {\n                            $item.prepend(iconResult);\n                        }\n                    }\n\n                    if (item.type) {\n                        // dis- / enable input elements\n                        $item.find('input, select, textarea').prop('disabled', disabled);\n\n                        // update input states\n                        switch (item.type) {\n                            case 'text':\n                            case 'textarea':\n                                item.$input.val(item.value || '');\n                                break;\n\n                            case 'checkbox':\n                            case 'radio':\n                                item.$input.val(item.value || '').prop('checked', !!item.selected);\n                                break;\n\n                            case 'select':\n                                item.$input.val((item.selected === 0 ? \"0\" : item.selected) || '');\n                                break;\n                        }\n                    }\n\n                    if (item.$menu) {\n                        // update sub-menu\n                        var subMenuHasVisibleItems = op.update.call($trigger, item, root);\n                        if (subMenuHasVisibleItems) {\n                            hasVisibleItems = true;\n                        }\n                    }\n                });\n                return hasVisibleItems;\n            },\n            layer: function (opt, zIndex) {\n                if (!opt.useModal) {\n                    var listener = function (ev) {\n                        handle.layerClick(ev, opt, function() {\n                            document.removeEventListener('mousedown', listener, true);\n                        });\n                    };\n                    document.addEventListener('mousedown', listener, true);\n                    return;\n                }\n\n                // add transparent layer for click area\n                // filter and background for Internet Explorer, Issue #23\n                var $layer = opt.$layer = $('<div id=\"context-menu-layer\"></div>')\n                    .css({\n                        height: $win.height(),\n                        width: $win.width(),\n                        display: 'block',\n                        position: 'fixed',\n                        'z-index': zIndex - 1,\n                        top: 0,\n                        left: 0,\n                        opacity: 0,\n                        filter: 'alpha(opacity=0)',\n                        'background-color': '#000'\n                    })\n                    .data('contextMenuRoot', opt)\n                    .appendTo(document.body)\n                    .on('contextmenu', handle.abortevent)\n                    .on('mousedown', handle.layerClick);\n\n                // IE6 doesn't know position:fixed;\n                if (typeof document.body.style.maxWidth === 'undefined') { // IE6 doesn't support maxWidth\n                    $layer.css({\n                        'position': 'absolute',\n                        'height': $(document).height()\n                    });\n                }\n\n                return $layer;\n            },\n            processPromises: function (opt, root, promise) {\n                // Start\n                opt.$node.addClass(root.classNames.iconLoadingClass);\n\n                function completedPromise(opt, root, items) {\n                    // Completed promise (dev called promise.resolve). We now have a list of items which can\n                    // be used to create the rest of the context menu.\n                    if (typeof items === 'undefined') {\n                        // Null result, dev should have checked\n                        errorPromise(undefined);//own error object\n                    }\n                    finishPromiseProcess(opt, root, items);\n                }\n\n                function errorPromise(opt, root, errorItem) {\n                    // User called promise.reject() with an error item, if not, provide own error item.\n                    if (typeof errorItem === 'undefined') {\n                        errorItem = {\n                            \"error\": {\n                                name: \"No items and no error item\",\n                                icon: \"context-menu-icon context-menu-icon-quit\"\n                            }\n                        };\n                        if (window.console) {\n                            (console.error || console.log).call(console, 'When you reject a promise, provide an \"items\" object, equal to normal sub-menu items');\n                        }\n                    } else if (typeof errorItem === 'string') {\n                        errorItem = {\"error\": {name: errorItem}};\n                    }\n                    finishPromiseProcess(opt, root, errorItem);\n                }\n\n                function finishPromiseProcess(opt, root, items) {\n                    if (typeof root.$menu === 'undefined' || !root.$menu.is(':visible')) {\n                        return;\n                    }\n                    opt.$node.removeClass(root.classNames.iconLoadingClass);\n                    opt.items = items;\n                    op.create(opt, root, true); // Create submenu\n                    op.update(opt, root); // Correctly update position if user is already hovered over menu item\n                    root.positionSubmenu.call(opt.$node, opt.$menu); // positionSubmenu, will only do anything if user already hovered over menu item that just got new subitems.\n                }\n\n                // Wait for promise completion. .then(success, error, notify) (we don't track notify). Bind the opt\n                // and root to avoid scope problems\n                promise.then(completedPromise.bind(this, opt, root), errorPromise.bind(this, opt, root));\n            },\n            // operation that will run after contextMenu showed on screen\n            activated: function(opt){\n                var $menu = opt.$menu;\n                var $menuOffset = $menu.offset();\n                var winHeight = $(window).height();\n                var winWidth = $(window).width();\n                var winScrollTop = $(window).scrollTop();\n                var winScrollLeft = $(window).scrollLeft();\n                var menuHeight = $menu.height();\n                var outerHeight = $menu.outerHeight();\n                var outerWidth = $menu.outerWidth();\n\n                if(menuHeight > winHeight){\n                    $menu.css({\n                        'height' : winHeight + 'px',\n                        'overflow-x': 'hidden',\n                        'overflow-y': 'auto',\n                        'top': winScrollTop + 'px'\n                    });\n                } else if($menuOffset.top < winScrollTop){\n                    $menu.css({\n                      'top': winScrollTop + 'px'\n                    });\n                } else if($menuOffset.top + outerHeight > winScrollTop + winHeight){\n                    $menu.css({\n                      'top': $menuOffset.top - (($menuOffset.top + outerHeight) - (winScrollTop + winHeight)) + \"px\"\n                    });\n                }\n                if($menuOffset.left + outerWidth > winScrollLeft + winWidth){\n                    $menu.css({\n                      'left': $menuOffset.left - (($menuOffset.left + outerWidth) - (winScrollLeft + winWidth)) + \"px\"\n                    });\n                }\n            }\n        };\n\n    // split accesskey according to http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#assigned-access-key\n    function splitAccesskey(val) {\n        var t = val.split(/\\s+/);\n        var keys = [];\n\n        for (var i = 0, k; k = t[i]; i++) {\n            k = k.charAt(0).toUpperCase(); // first character only\n            // theoretically non-accessible characters should be ignored, but different systems, different keyboard layouts, ... screw it.\n            // a map to look up already used access keys would be nice\n            keys.push(k);\n        }\n\n        return keys;\n    }\n\n// handle contextMenu triggers\n    $.fn.contextMenu = function (operation) {\n        var $t = this, $o = operation;\n        if (this.length > 0) {  // this is not a build on demand menu\n            if (typeof operation === 'undefined') {\n                this.first().trigger('contextmenu');\n            } else if (typeof operation.x !== 'undefined' && typeof operation.y !== 'undefined') {\n                this.first().trigger($.Event('contextmenu', {\n                    pageX: operation.x,\n                    pageY: operation.y,\n                    mouseButton: operation.button\n                }));\n            } else if (operation === 'hide') {\n                var $menu = this.first().data('contextMenu') ? this.first().data('contextMenu').$menu : null;\n                if ($menu) {\n                    $menu.trigger('contextmenu:hide');\n                }\n            } else if (operation === 'destroy') {\n                $.contextMenu('destroy', {context: this});\n            } else if ($.isPlainObject(operation)) {\n                operation.context = this;\n                $.contextMenu('create', operation);\n            } else if (operation) {\n                this.removeClass('context-menu-disabled');\n            } else if (!operation) {\n                this.addClass('context-menu-disabled');\n            }\n        } else {\n            $.each(menus, function () {\n                if (this.selector === $t.selector) {\n                    $o.data = this;\n\n                    $.extend($o.data, {trigger: 'demand'});\n                }\n            });\n\n            handle.contextmenu.call($o.target, $o);\n        }\n\n        return this;\n    };\n\n    // manage contextMenu instances\n    $.contextMenu = function (operation, options) {\n        if (typeof operation !== 'string') {\n            options = operation;\n            operation = 'create';\n        }\n\n        if (typeof options === 'string') {\n            options = {selector: options};\n        } else if (typeof options === 'undefined') {\n            options = {};\n        }\n\n        // merge with default options\n        var o = $.extend(true, {}, defaults, options || {});\n        var $document = $(document);\n        var $context = $document;\n        var _hasContext = false;\n\n        if (!o.context || !o.context.length) {\n            o.context = document;\n        } else {\n            // you never know what they throw at you...\n            $context = $(o.context).first();\n            o.context = $context.get(0);\n            _hasContext = !$(o.context).is(document);\n        }\n\n        switch (operation) {\n\n            case 'update':\n                // Updates visibility and such\n                if(_hasContext){\n                    op.update($context);\n                } else {\n                    for(var menu in menus){\n                        if(menus.hasOwnProperty(menu)){\n                            op.update(menus[menu]);\n                        }\n                    }\n                }\n                break;\n\n            case 'create':\n                // no selector no joy\n                if (!o.selector) {\n                    throw new Error('No selector specified');\n                }\n                // make sure internal classes are not bound to\n                if (o.selector.match(/.context-menu-(list|item|input)($|\\s)/)) {\n                    throw new Error('Cannot bind to selector \"' + o.selector + '\" as it contains a reserved className');\n                }\n                if (!o.build && (!o.items || $.isEmptyObject(o.items))) {\n                    throw new Error('No Items specified');\n                }\n                counter++;\n                o.ns = '.contextMenu' + counter;\n                if (!_hasContext) {\n                    namespaces[o.selector] = o.ns;\n                }\n                menus[o.ns] = o;\n\n                // default to right click\n                if (!o.trigger) {\n                    o.trigger = 'right';\n                }\n\n                if (!initialized) {\n                    var itemClick = o.itemClickEvent === 'click' ? 'click.contextMenu' : 'mouseup.contextMenu';\n                    var contextMenuItemObj = {\n                        // 'mouseup.contextMenu': handle.itemClick,\n                        // 'click.contextMenu': handle.itemClick,\n                        'contextmenu:focus.contextMenu': handle.focusItem,\n                        'contextmenu:blur.contextMenu': handle.blurItem,\n                        'contextmenu.contextMenu': handle.abortevent,\n                        'mouseenter.contextMenu': handle.itemMouseenter,\n                        'mouseleave.contextMenu': handle.itemMouseleave\n                    };\n                    contextMenuItemObj[itemClick] = handle.itemClick;\n                    // make sure item click is registered first\n                    $document\n                        .on({\n                            'contextmenu:hide.contextMenu': handle.hideMenu,\n                            'prevcommand.contextMenu': handle.prevItem,\n                            'nextcommand.contextMenu': handle.nextItem,\n                            'contextmenu.contextMenu': handle.abortevent,\n                            'mouseenter.contextMenu': handle.menuMouseenter,\n                            'mouseleave.contextMenu': handle.menuMouseleave\n                        }, '.context-menu-list')\n                        .on('mouseup.contextMenu', '.context-menu-input', handle.inputClick)\n                        .on(contextMenuItemObj, '.context-menu-item');\n\n                    initialized = true;\n                }\n\n                // engage native contextmenu event\n                $context\n                    .on('contextmenu' + o.ns, o.selector, o, handle.contextmenu);\n\n                if (_hasContext) {\n                    // add remove hook, just in case\n                    $context.on('remove' + o.ns, function () {\n                        $(this).contextMenu('destroy');\n                    });\n                }\n\n                switch (o.trigger) {\n                    case 'hover':\n                        $context\n                            .on('mouseenter' + o.ns, o.selector, o, handle.mouseenter)\n                            .on('mouseleave' + o.ns, o.selector, o, handle.mouseleave);\n                        break;\n\n                    case 'left':\n                        $context.on('click' + o.ns, o.selector, o, handle.click);\n                        break;\n\t\t\t\t    case 'touchstart':\n                        $context.on('touchstart' + o.ns, o.selector, o, handle.click);\n                        break;\n                    /*\n                     default:\n                     // http://www.quirksmode.org/dom/events/contextmenu.html\n                     $document\n                     .on('mousedown' + o.ns, o.selector, o, handle.mousedown)\n                     .on('mouseup' + o.ns, o.selector, o, handle.mouseup);\n                     break;\n                     */\n                }\n\n                // create menu\n                if (!o.build) {\n                    op.create(o);\n                }\n                break;\n\n            case 'destroy':\n                var $visibleMenu;\n                if (_hasContext) {\n                    // get proper options\n                    var context = o.context;\n                    $.each(menus, function (ns, o) {\n\n                        if (!o) {\n                            return true;\n                        }\n\n                        // Is this menu equest to the context called from\n                        if (!$(context).is(o.selector)) {\n                            return true;\n                        }\n\n                        $visibleMenu = $('.context-menu-list').filter(':visible');\n                        if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))) {\n                            $visibleMenu.trigger('contextmenu:hide', {force: true});\n                        }\n\n                        try {\n                            if (menus[o.ns].$menu) {\n                                menus[o.ns].$menu.remove();\n                            }\n\n                            delete menus[o.ns];\n                        } catch (e) {\n                            menus[o.ns] = null;\n                        }\n\n                        $(o.context).off(o.ns);\n\n                        return true;\n                    });\n                } else if (!o.selector) {\n                    $document.off('.contextMenu .contextMenuAutoHide');\n                    $.each(menus, function (ns, o) {\n                        $(o.context).off(o.ns);\n                    });\n\n                    namespaces = {};\n                    menus = {};\n                    counter = 0;\n                    initialized = false;\n\n                    $('#context-menu-layer, .context-menu-list').remove();\n                } else if (namespaces[o.selector]) {\n                    $visibleMenu = $('.context-menu-list').filter(':visible');\n                    if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is(o.selector)) {\n                        $visibleMenu.trigger('contextmenu:hide', {force: true});\n                    }\n\n                    try {\n                        if (menus[namespaces[o.selector]].$menu) {\n                            menus[namespaces[o.selector]].$menu.remove();\n                        }\n\n                        delete menus[namespaces[o.selector]];\n                    } catch (e) {\n                        menus[namespaces[o.selector]] = null;\n                    }\n\n                    $document.off(namespaces[o.selector]);\n                }\n                break;\n\n            case 'html5':\n                // if <command> and <menuitem> are not handled by the browser,\n                // or options was a bool true,\n                // initialize $.contextMenu for them\n                if ((!$.support.htmlCommand && !$.support.htmlMenuitem) || (typeof options === 'boolean' && options)) {\n                    $('menu[type=\"context\"]').each(function () {\n                        if (this.id) {\n                            $.contextMenu({\n                                selector: '[contextmenu=' + this.id + ']',\n                                items: $.contextMenu.fromMenu(this)\n                            });\n                        }\n                    }).css('display', 'none');\n                }\n                break;\n\n            default:\n                throw new Error('Unknown operation \"' + operation + '\"');\n        }\n\n        return this;\n    };\n\n// import values into <input> commands\n    $.contextMenu.setInputValues = function (opt, data) {\n        if (typeof data === 'undefined') {\n            data = {};\n        }\n\n        $.each(opt.inputs, function (key, item) {\n            switch (item.type) {\n                case 'text':\n                case 'textarea':\n                    item.value = data[key] || '';\n                    break;\n\n                case 'checkbox':\n                    item.selected = data[key] ? true : false;\n                    break;\n\n                case 'radio':\n                    item.selected = (data[item.radio] || '') === item.value;\n                    break;\n\n                case 'select':\n                    item.selected = data[key] || '';\n                    break;\n            }\n        });\n    };\n\n// export values from <input> commands\n    $.contextMenu.getInputValues = function (opt, data) {\n        if (typeof data === 'undefined') {\n            data = {};\n        }\n\n        $.each(opt.inputs, function (key, item) {\n            switch (item.type) {\n                case 'text':\n                case 'textarea':\n                case 'select':\n                    data[key] = item.$input.val();\n                    break;\n\n                case 'checkbox':\n                    data[key] = item.$input.prop('checked');\n                    break;\n\n                case 'radio':\n                    if (item.$input.prop('checked')) {\n                        data[item.radio] = item.value;\n                    }\n                    break;\n            }\n        });\n\n        return data;\n    };\n\n// find <label for=\"xyz\">\n    function inputLabel(node) {\n        return (node.id && $('label[for=\"' + node.id + '\"]').val()) || node.name;\n    }\n\n// convert <menu> to items object\n    function menuChildren(items, $children, counter) {\n        if (!counter) {\n            counter = 0;\n        }\n\n        $children.each(function () {\n            var $node = $(this),\n                node = this,\n                nodeName = this.nodeName.toLowerCase(),\n                label,\n                item;\n\n            // extract <label><input>\n            if (nodeName === 'label' && $node.find('input, textarea, select').length) {\n                label = $node.text();\n                $node = $node.children().first();\n                node = $node.get(0);\n                nodeName = node.nodeName.toLowerCase();\n            }\n\n            /*\n             * <menu> accepts flow-content as children. that means <embed>, <canvas> and such are valid menu items.\n             * Not being the sadistic kind, $.contextMenu only accepts:\n             * <command>, <menuitem>, <hr>, <span>, <p> <input [text, radio, checkbox]>, <textarea>, <select> and of course <menu>.\n             * Everything else will be imported as an html node, which is not interfaced with contextMenu.\n             */\n\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#concept-command\n            switch (nodeName) {\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-menu-element\n                case 'menu':\n                    item = {name: $node.attr('label'), items: {}};\n                    counter = menuChildren(item.items, $node.children(), counter);\n                    break;\n\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-a-element-to-define-a-command\n                case 'a':\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-button-element-to-define-a-command\n                case 'button':\n                    item = {\n                        name: $node.text(),\n                        disabled: !!$node.attr('disabled'),\n                        callback: (function () {\n                            return function (itemKey, opt, ev) {\n                                if ($node.get(0).onclick !== null) {\n                                    $node.get(0).click();\n                                } else {\n                                    opt.callback(itemKey, opt, ev);\n                                }\n                            };\n                        })()\n                    };\n                    break;\n\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-command-element-to-define-a-command\n                case 'menuitem':\n                case 'command':\n                    switch ($node.attr('type')) {\n                        case undefined:\n                        case 'command':\n                        case 'menuitem':\n                            item = {\n                                name: $node.attr('label'),\n                                disabled: !!$node.attr('disabled'),\n                                icon: $node.attr('icon'),\n                                callback: (function () {\n                                    return function (itemKey, opt, ev) {\n                                        if ($node.get(0).onclick !== null) {\n                                            $node.get(0).click();\n                                        } else {\n                                            opt.callback(itemKey, opt, ev);\n                                        }\n                                    };\n                                })()\n                            };\n                            break;\n\n                        case 'checkbox':\n                            item = {\n                                type: 'checkbox',\n                                disabled: !!$node.attr('disabled'),\n                                name: $node.attr('label'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n                        case 'radio':\n                            item = {\n                                type: 'radio',\n                                disabled: !!$node.attr('disabled'),\n                                name: $node.attr('label'),\n                                radio: $node.attr('radiogroup'),\n                                value: $node.attr('id'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        default:\n                            item = undefined;\n                    }\n                    break;\n\n                case 'hr':\n                    item = '-------';\n                    break;\n\n                case 'input':\n                    switch ($node.attr('type')) {\n                        case 'text':\n                            item = {\n                                type: 'text',\n                                name: label || inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                value: $node.val()\n                            };\n                            break;\n\n                        case 'checkbox':\n                            item = {\n                                type: 'checkbox',\n                                name: label || inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        case 'radio':\n                            item = {\n                                type: 'radio',\n                                name: label || inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                radio: !!$node.attr('name'),\n                                value: $node.val(),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        default:\n                            item = undefined;\n                            break;\n                    }\n                    break;\n\n                case 'select':\n                    item = {\n                        type: 'select',\n                        name: label || inputLabel(node),\n                        disabled: !!$node.attr('disabled'),\n                        selected: $node.val(),\n                        options: {}\n                    };\n                    $node.children().each(function () {\n                        item.options[this.value] = $(this).text();\n                    });\n                    break;\n\n                case 'textarea':\n                    item = {\n                        type: 'textarea',\n                        name: label || inputLabel(node),\n                        disabled: !!$node.attr('disabled'),\n                        value: $node.val()\n                    };\n                    break;\n\n                case 'label':\n                    break;\n\n                default:\n                    item = {type: 'html', html: $node.clone(true)};\n                    break;\n            }\n\n            if (item) {\n                counter++;\n                items['key' + counter] = item;\n            }\n        });\n\n        return counter;\n    }\n\n// convert html5 menu\n    $.contextMenu.fromMenu = function (element) {\n        var $this = $(element),\n            items = {};\n\n        menuChildren(items, $this.children());\n\n        return items;\n    };\n\n// make defaults accessible\n    $.contextMenu.defaults = defaults;\n    $.contextMenu.types = types;\n// export internal functions - undocumented, for hacking only!\n    $.contextMenu.handle = handle;\n    $.contextMenu.op = op;\n    $.contextMenu.menus = menus;\n\n});\n"],"names":["factory","define","amd","exports","require","jQuery","$","isInteractionTooFast","$element","window","navigator","maxTouchPoints","msMaxTouchPoints","interactionTime","Date","now","$liItem","is","closest","length","$parentMenu","parent","hasClass","showTimestamp","data","Infinity","orig","support","htmlMenuitem","htmlCommand","eventSelectstart","document","documentElement","ui","widget","cleanData","elems","events","elem","i","_data","remove","triggerHandler","e","$currentTrigger","initialized","$win","counter","namespaces","menus","types","defaults","selector","appendTo","trigger","autoHide","delay","reposition","hideOnSecondTrigger","useModal","selectableSubMenu","classNames","hover","disabled","visible","notSelectable","icon","iconEdit","iconCut","iconCopy","iconPaste","iconDelete","iconAdd","iconQuit","iconLoadingClass","determinePosition","$menu","position","css","my","at","of","this","offset","collision","top","outerHeight","left","outerWidth","opt","x","y","offsetParentOffset","offsetParent","bottom","scrollTop","height","right","scrollLeft","width","call","positionSubmenu","zIndex","animation","duration","show","hide","preShow","noop","activated","callback","items","hoveract","timer","pageX","pageY","handle","abortevent","preventDefault","stopImmediatePropagation","contextmenu","$this","originalEvent","mouseButton","build","built","extend","isEmptyObject","console","error","log","Error","$trigger","op","create","click","Event","mousedown","button","mouseup","removeData","mouseenter","$related","relatedTarget","$document","on","mousemove","setTimeout","off","mouseleave","clearTimeout","layerClick","onhide","target","root","undefined","$layer","elementFromPoint","contains","$window","triggerAction","isContentEditable","range","createRange","sel","getSelection","selectNode","collapse","removeAllRanges","addRange","one","contextMenu","keyStop","isInput","stopPropagation","key","targetZIndex","getZIndexOfTriggerTarget","style","parentElement","parseInt","keyCode","shiftKey","$selected","find","blur","prop","$parent","itemdata","children","k","String","fromCharCode","toUpperCase","accesskeys","$node","prevItem","$s","$children","$prev","prev","last","$round","itemMouseleave","get","itemMouseenter","$input","focus","nextItem","$next","next","first","focusInput","contextMenuRoot","blurInput","menuMouseenter","hovering","menuMouseleave","itemClick","contextMenuKey","isFunction","callbacks","Object","prototype","hasOwnProperty","update","inputClick","hideMenu","force","focusItem","addClass","join","not","removeClass","filter","focusShowTimestamp","blurItem","additionalZValue","$t","zin","$tt","Math","max","indexOf","toLowerCase","zindex","layer","rootShowTimestamp","pos","each","handleFastInputClick","$inputClicked","createNameNode","item","$name","_accesskey","_beforeAccesskey","append","createTextNode","text","_afterAccesskey","isHtmlName","accesskey","html","name","className","dataAttr","attr","$label","type","ak","aks","val","t","split","keys","charAt","push","splitAccesskey","matched","match","RegExp","commands","hasTypes","inputs","value","selected","prependTo","radio","options","then","processPromises","_icon","substring","prepend","body","resize","nested","domMenu","display","getBoundingClientRect","ceil","minWidth","maxWidth","addBack","hasVisibleItems","$item","iconResult","z-index","opacity","background-color","listener","ev","removeEventListener","addEventListener","promise","errorPromise","errorItem","finishPromiseProcess","bind","$menuOffset","winHeight","winWidth","winScrollTop","winScrollLeft","menuHeight","overflow-x","overflow-y","inputLabel","node","id","menuChildren","label","nodeName","itemKey","onclick","clone","fn","operation","$o","context","isPlainObject","o","$context","_hasContext","menu","ns","itemClickEvent","contextMenuItemObj","contextmenu:focus.contextMenu","contextmenu:blur.contextMenu","contextmenu.contextMenu","mouseenter.contextMenu","mouseleave.contextMenu","contextmenu:hide.contextMenu","prevcommand.contextMenu","nextcommand.contextMenu","$visibleMenu","fromMenu","setInputValues","getInputValues","element"],"mappings":"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"}